import { normalizeImagePath } from 'rspress/runtime';

# Commands

Harlequin provides both interactive and non-interactive command modes for building AOS projects and working with Lua files.

## Interactive Mode (Default)

The default behavior when running `harlequin` without arguments launches an interactive TUI:

```bash
harlequin
```

<img src={normalizeImagePath("/cli_command_select.png")} alt="cli-command-select" />

This provides a guided experience with:
- **Command selection interface** - Choose between Build Project and Lua Utils
- **Build type selection** (AOS Flavour) - For build commands
- **Entrypoint file selection** - Manual or auto-discovery file picker
- **Output directory configuration** - Customizable output paths
- **Configuration review and editing** - Review and modify build settings
- **Real-time progress** - Live feedback during build/bundle operations

## Non-Interactive Commands

For automation and scripting, use explicit commands:

### Init Command

Create new AO process projects from templates:

```bash
harlequin init <language> [flags]
```

**Required:**
- `<language>` - Template language (lua, c, rust, assemblyscript)

**Optional:**
- `--name <name>` - Project name (required in non-interactive mode)
- `--dir <directory>` - Target directory (default: project name)
- `--author <author>` - Author name for project metadata
- `--github <username>` - GitHub username for project metadata
- `--interactive` - Force interactive mode

### Build Command

Build AOS projects with WebAssembly output:

```bash
harlequin build --entrypoint <file> [flags]
```

**Required:**
- `--entrypoint <file>` - Path to the main Lua file

**Optional:**
- `--outputDir <dir>` - Output directory for build artifacts
- `--configPath <file>` - Custom configuration file
- `--debug` - Enable debug logging

### Lua Utils Commands

Bundle and process Lua files:

```bash
harlequin lua-utils <command> [flags]
```

**Available Commands:**
- `bundle` - Bundle multiple Lua files into a single executable

**Bundle Command:**
```bash
harlequin lua-utils bundle --entrypoint <file> [flags]
```

**Required:**
- `--entrypoint <file>` - Path to the main Lua file to bundle

**Optional:**
- `--outputPath <file>` - Output path for bundled file
- `--debug` - Enable debug logging

### Version Management Commands

Manage harlequin installations and versions:

```bash
harlequin install [--version <version>]  # Install or upgrade harlequin
harlequin uninstall                       # Remove harlequin
harlequin versions [--format <format>]    # List available versions
```

**Install Command:**
- Interactive version selection when run without `--version`
- Install specific versions with `--version v0.1.1`

**Versions Command:**
- `--format table` - Human-readable table (default)
- `--format json` - JSON output for scripts
- `--format list` - Simple list of version tags

### Remote Signing Commands

Start and manage the remote signing server:

```bash
harlequin remote-signing <command> [flags]
```

**Available Commands:**
- `start` - Start the remote signing server
- `stop` - Stop the remote signing server
- `status` - Check server status

### Other Commands

```bash
harlequin version    # Show current version information
harlequin help       # Show help message
```

## Examples

**Interactive (Recommended for Development):**
```bash
# Launch interactive TUI
harlequin

# Create new project interactively
harlequin init
```

**Non-Interactive (Good for CI/CD):**
```bash
# Create new projects
harlequin init lua --name my-ao-process --author "Developer"
harlequin init rust --name my-rust-project --github developer

# Basic build
harlequin build --entrypoint main.lua

# Build with custom output directory
harlequin build --entrypoint src/app.lua --outputDir dist

# Build with custom config and debug
harlequin build --entrypoint main.lua --configPath custom.yaml --debug

# Bundle Lua files
harlequin lua-utils bundle --entrypoint main.lua

# Bundle with custom output
harlequin lua-utils bundle --entrypoint src/app.lua --outputPath dist/bundle.lua
```

**Version Management:**
```bash
# List available versions
harlequin versions

# Install specific version
harlequin install --version v0.1.1

# Interactive version selection
harlequin install

# Check current version
harlequin version

# Remove harlequin
harlequin uninstall
```

**Remote Signing:**
```bash
# Start signing server
harlequin remote-signing start

# Start with custom port
harlequin remote-signing start --port 9000

# Check server status
harlequin remote-signing status
```
